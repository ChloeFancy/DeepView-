/////////////////后端传入
var secuName1="上证指数"
var secuName2="万科Ａ"
var legendData=[244, 0.002, 0.90000000000000002, 0.042999999999999997];
var chartData=[['2017-01-03', 0.010401827558909726, 0.00855130784708269], ['2017-01-04', 0.007293934209052777, 0.0059850374064838174], ['2017-01-05', 0.0020947551502250583, 0.00396628656420428], ['2017-01-06', -0.003503463010126051, -0.014320987654320994], ['2017-01-09', 0.005362548706995929, 0.0010020040080160886], ['2017-01-10', -0.0030161424115933144, -0.00350350350350348], ['2017-01-11', -0.007881211433965363, -0.009040683073832212], ['2017-01-12', -0.005567826735508485, 0.0], ['2017-01-13', -0.0020915666476003514, 0.0694374049670552], ['2017-01-16', -0.002999391794637596, -0.03744075829383897], ['2017-01-17', 0.0017228045889901011, -0.009354997538158383], ['2017-01-18', 0.0013631416056987256, 0.005964214711729587], ['2017-01-19', -0.0037626256728892082, -0.015316205533596805], ['2017-01-20', 0.007042113189207999, 0.00351229302558953], ['2017-01-23', 0.004366088232579113, 0.0029999999999998916], ['2017-01-24', 0.001842178788225457, -0.002492522432701705], ['2017-01-25', 0.0022279335723598415, -0.0034982508745626806], ['2017-01-26', 0.0030516377442182385, 0.0030090270812437314], ['2017-02-03', -0.006012979374936278, 0.0], ['2017-02-06', 0.005354423486626514, 0.0015000000000000568], ['2017-02-07', -0.0012340893228530714, -0.003494757863205189], ['2017-02-08', 0.004406474186986031, 0.0025050100200401104], ['2017-02-09', 0.005114522603192784, 0.005497251374312784], ['2017-02-10', 0.004247200142097007, -0.006958250497017926], ['2017-02-13', 0.00630037422979135, 0.005505505505505548], ['2017-02-14', 0.000338406698201954, 0.006968641114982521], ['2017-02-15', -0.0015358640715391614, -0.011863568956994697], ['2017-02-16', 0.005176711492989039, 0.0005002501250626068], ['2017-02-17', -0.008528190203523689, -0.00649999999999995], ['2017-02-20', 0.011831606973926379, 0.00352289884247603], ['2017-02-21', 0.004124864084024793, 0.01755265797392158], ['2017-02-22', 0.002426040528312301, -0.003449975357318835], ['2017-02-23', -0.0030183197788901106, -0.005440158259149341], ['2017-02-24', 0.0006328707085463403, -0.00348085529587272], ['2017-02-27', -0.0076135032872998165, -0.009481037924151559], ['2017-02-28', 0.004049016988532994, 0.0005037783375314575], ['2017-03-01', 0.0016042036279915184, -0.0015105740181269312], ['2017-03-02', -0.0052065741414168976, -0.008068582955118364], ['2017-03-03', -0.0036273059048619327, -0.0066090493136757855], ['2017-03-06', 0.0048329375668323404, 0.0010235414534287557], ['2017-03-07', 0.0026409878431254974, 0.002044989775051187], ['2017-03-08', -0.0005371627855521588, 0.02244897959183656], ['2017-03-09', -0.007380862555168455, -0.009980039920159611], ['2017-03-10', -0.0012390161895607932, 0.004536290322580738], ['2017-03-13', 0.007552478007928354, 0.005017561465127995], ['2017-03-14', 0.0007115794369669803, 0.04143784323514721], ['2017-03-15', 0.0007507421755834631, -0.012943432406519628], ['2017-03-16', 0.008383008771439604, -0.0009713453132588201], ['2017-03-17', -0.00963258558122626, 0.013125911521633338], ['2017-03-20', 0.0041270481299910955, -0.019193857965451033], ['2017-03-21', 0.0033230505570891467, 0.0024461839530331986], ['2017-03-22', -0.005025430992563584, -0.005368472425573478], ['2017-03-23', 0.0010260321966482078, 0.018155053974484803], ['2017-03-24', 0.006432286163409184, 0.001927710843373509], ['2017-03-27', -0.0007615665422857631, -0.013468013468013407], ['2017-03-28', -0.004287570273384778, 0.0029254022428082394], ['2017-03-29', -0.0035762945972789284, -0.012153621779290247], ['2017-03-30', -0.00958793136512781, -0.022637795275590622], ['2017-03-31', 0.0038244218051322054, 0.0025176233635448853], ['2017-04-05', 0.014830407884626196, 0.0], ['2017-04-06', 0.0032716516322908173, 0.010045203415369075], ['2017-04-07', 0.0017102383303504443, 0.0004972650422676583], ['2017-04-10', -0.005240466181628767, -0.009443339960238606], ['2017-04-11', 0.005986769530218039, 0.004515805318615174], ['2017-04-12', -0.004601933063637653, 0.015484515484515349], ['2017-04-13', 0.0006506751831745206, -0.003935071323167616], ['2017-04-14', -0.009125110582078877, -0.014320987654320994], ['2017-04-17', -0.007362602642681293, -0.003507014028056088], ['2017-04-18', -0.007899651889583859, -0.004524886877828038], ['2017-04-19', -0.008141674763263773, 0.003030303030302939], ['2017-04-20', 0.00044583402075004663, 0.0050352467270897705], ['2017-04-21', 0.00033129469455928096, 0.002004008016031955], ['2017-04-24', -0.013746587304128477, -0.0119999999999999], ['2017-04-25', 0.001609250612360169, 0.006072874493926905], ['2017-04-26', 0.0020033705448476713, -0.009557344064386242], ['2017-04-27', 0.003610427263396554, -0.029456576942610502], ['2017-04-28', 0.0007840588386429648, -0.013082155939298845], ['2017-05-02', -0.003469884409671664, -0.015376458112407176], ['2017-05-03', -0.002661216973399161, -0.017770597738287708], ['2017-05-04', -0.0025443124937407635, 0.00877192982456143], ['2017-05-05', -0.007779990891384148, -0.007065217391304279], ['2017-05-08', -0.007871286646910947, -0.021893814997263172], ['2017-05-09', 0.0006217085623203555, 0.007834359261331914], ['2017-05-10', -0.009005569793920642, 0.0027762354247637955], ['2017-05-11', 0.0028548685872080704, 0.030454042081949018], ['2017-05-12', 0.007190232841068012, 0.008597528210639416], ['2017-05-15', 0.0021779378145680983, -0.003196590303676028], ['2017-05-16', 0.00735715726430497, -0.0058792089791555036], ['2017-05-17', -0.0027378085491635007, -0.004838709677419395], ['2017-05-18', -0.004607108879326582, -0.004862236628849215], ['2017-05-19', 0.00015918377781720672, 0.006514657980455807], ['2017-05-22', -0.004838914928340432, -0.004854368932038833], ['2017-05-23', -0.0044636046792451145, 0.008130081300813163], ['2017-05-24', 0.0006952765674910211, -0.0021505376344087557], ['2017-05-25', 0.014280064015385507, 0.06842672413793105], ['2017-05-26', 0.000716769968612585, 0.002521432173474558], ['2017-05-31', 0.002289056473435691, 0.03420523138832987], ['2017-06-01', -0.00466915939154966, -0.0077821011673151474], ['2017-06-02', 0.0009401077127251245, -0.00686274509803908], ['2017-06-05', -0.004470687867488388, 0.007403751233958422], ['2017-06-06', 0.0033865021403900464, -0.010779029887310054], ['2017-06-07', 0.012313780936041852, 0.0], ['2017-06-08', 0.0031871542973147537, 0.0], ['2017-06-09', 0.0025606177072803327, 0.0], ['2017-06-12', -0.00586493086816986, 0.03962357602773636], ['2017-06-13', 0.0044161926618391245, 0.013816102906145877], ['2017-06-14', -0.00731476874668513, -0.0296052631578948], ['2017-06-15', 0.0005788849302099663, -0.014527845036319431], ['2017-06-16', -0.002975304313381999, -0.004914004914004955], ['2017-06-19', 0.006790448743970057, 0.0019753086419753707], ['2017-06-20', -0.001386698954599419, 0.002464268112370771], ['2017-06-21', 0.005158640077227661, 0.000491642084562427], ['2017-06-22', -0.0027750355663710424, 0.0398034398034397], ['2017-06-23', 0.0033105496215162233, 0.10018903591682427], ['2017-06-26', 0.008730845097317141, 0.10008591065292083], ['2017-06-27', 0.0018060277250526724, -0.035532994923857864], ['2017-06-28', -0.005639106756464951, -0.021052631578947323], ['2017-06-29', 0.004683314459649424, 0.006617038875103454], ['2017-06-30', 0.001368981944362746, -0.007806080525883385], ['2017-07-03', 0.0010915520101650866, -0.015734989648033104], ['2017-07-04', -0.004101396296443238, -0.029028186790071575], ['2017-07-05', 0.0076442975327508655, 0.02859618717504331], ['2017-07-06', 0.0016556213955749577, -0.013058129738837354], ['2017-07-07', 0.0017160454781468548, 0.01792573623559557], ['2017-07-10', -0.0016547146206163932, -0.009224318658280994], ['2017-07-11', -0.0029864610383778523, 0.013118916631400968], ['2017-07-12', -0.0017151219740636492, 0.028822055137844416], ['2017-07-13', 0.006448480660421918, -0.04060089321965088], ['2017-07-14', 0.00132174775971583, 0.0067710537452390085], ['2017-07-17', -0.014260104403626461, 0.0], ['2017-07-18', 0.0034952063690425472, 0.02858343841950406], ['2017-07-19', 0.01361822269974411, -0.006129955046996316], ['2017-07-20', 0.004298546055523378, 0.008223684210526327], ['2017-07-21', -0.0021211978422398525, -0.022430668841761814], ['2017-07-24', 0.003896624863568565, -0.039632874426366316], ['2017-07-25', -0.0021256082994428604, -0.022589052997393555], ['2017-07-26', 0.0012286626456896599, 0.006666666666666599], ['2017-07-27', 0.0006486486885941556, -0.017660044150110354], ['2017-07-28', 0.0010643792840958621, 0.02741573033707856], ['2017-07-31', 0.00608252006215082, -0.010936132983377034], ['2017-08-01', 0.0059913933527553365, 0.0017691287041132764], ['2017-08-02', -0.0023025608370041972, 0.007064017660044053], ['2017-08-03', -0.003691930075607752, -0.0201665935992984], ['2017-08-04', -0.003314371110937242, -0.011633109619686888], ['2017-08-07', 0.005326569307340101, -0.005432322317790894], ['2017-08-08', 0.0007367684024237597, 0.00273099681383715], ['2017-08-09', -0.001919574701371829, 0.00771674988651827], ['2017-08-10', -0.00422020818952884, -0.006756756756756688], ['2017-08-11', -0.01631274922592163, -0.03401360544217691], ['2017-08-14', 0.00898193206987874, -0.00328638497652578], ['2017-08-15', 0.004294085038791806, 0.0032972209138011355], ['2017-08-16', -0.0014795794506483606, -0.007511737089201831], ['2017-08-17', 0.006770038619400731, 0.002838221381267658], ['2017-08-18', 9.010442873824687e-05, 0.04103773584905657], ['2017-08-21', 0.005562169926659255, -0.008608971454463155], ['2017-08-22', 0.0010101294363344948, 0.02605118829981712], ['2017-08-23', -0.0007661480487493044, 0.0013363028953230494], ['2017-08-24', -0.004925381228710668, -0.0066725978647688144], ['2017-08-25', 0.01834332428033192, 0.0049261083743843415], ['2017-08-28', 0.009343867177108, 0.03475935828876997], ['2017-08-29', 0.0007656755618496991, 0.00602928509905265], ['2017-08-30', -0.0004753023875572193, -0.005136986301369939], ['2017-08-31', -0.0008372808087556693, -0.00043029259896720795], ['2017-09-01', 0.001877255613028872, -0.01506672406371079], ['2017-09-04', 0.0037015616375231097, 0.0034965034965035446], ['2017-09-05', 0.001400764532192289, 0.03484320557491283], ['2017-09-06', 0.00031669610145868, 0.0016835016835017313], ['2017-09-07', -0.005875661903294582, 0.09117647058823519], ['2017-09-08', -7.570946273804946e-05, -0.00693107431651907], ['2017-09-11', 0.0033221999025330184, -0.01977510663047688], ['2017-09-12', 0.0009090104580629088, -0.0007911392405063333], ['2017-09-13', 0.0013786111979092741, 0.019794140934283444], ['2017-09-14', -0.0037591156648927315, 0.06987577639751552], ['2017-09-15', -0.005281563976971659, 0.06313497822931802], ['2017-09-18', 0.0027550832247142942, -0.04300341296928334], ['2017-09-19', -0.0017883891464129942, 0.02603423680456496], ['2017-09-20', 0.002726161348070688, -0.0013903371567605127], ['2017-09-21', -0.002431256675030413, -0.011486251305255935], ['2017-09-22', -0.001573316054622853, -0.02077464788732397], ['2017-09-25', -0.0032753478612298492, -0.06076950737144904], ['2017-09-26', 0.000608669866161371, 0.024502297090352343], ['2017-09-27', 0.0005051766928083623, 0.002989536621823552], ['2017-09-28', -0.0016828528457044634, -0.01602086438152006], ['2017-09-29', 0.0027850289706192743, -0.0060583112457403], ['2017-10-09', 0.0075949334582603445, 0.008380952380952378], ['2017-10-10', 0.0025515220123080162, 0.004533434076312792], ['2017-10-11', 0.0015654504705737704, 0.010530274539300555], ['2017-10-12', -0.0006445150786956733, 0.008559732043170731], ['2017-10-13', 0.0013063110953603907, -0.006273062730627332], ['2017-10-16', -0.003554878976941289, -0.023022651318232445], ['2017-10-17', -0.0019031393615288605, -0.003800836183960432], ['2017-10-18', 0.0028923138442547014, 0.008393742846241947], ['2017-10-19', -0.003436519501470614, -0.014377601210745272], ['2017-10-20', 0.002515005094250178, 0.004222648752399305], ['2017-10-23', 0.0006070179371449047, -0.008792048929663676], ['2017-10-24', 0.002232881424817812, 0.04126494408021597], ['2017-10-25', 0.0025528830138363823, 0.0159259259259259], ['2017-10-26', 0.003140983794771568, 0.0036456434560701023], ['2017-10-27', 0.002713167409087669, -0.0010897203051217774], ['2017-10-30', -0.007748537789197818, 0.053818181818181765], ['2017-10-31', 0.0008862245586138684, -0.0006901311249136732], ['2017-11-01', 0.0007576012754624273, 0.006560773480662974], ['2017-11-02', -0.0037112263640479703, 0.010291595197255532], ['2017-11-03', -0.003418368907721847, -0.04278438030560261], ['2017-11-06', 0.004872878698000793, -0.02589570769776517], ['2017-11-07', 0.007496840038508035, 0.014202476329206126], ['2017-11-08', 0.0005523242086273861, -0.007540394973070019], ['2017-11-09', 0.003611343502114339, 0.0010853835021709113], ['2017-11-10', 0.0014232182990194797, -0.005782435851102274], ['2017-11-13', 0.004417169814393329, -0.016357688113413427], ['2017-11-14', -0.0053040808961957175, 0.053215077605321515], ['2017-11-15', -0.007879667648350908, -0.002105263157894721], ['2017-11-16', -0.0009622855030139155, 0.017580872011251802], ['2017-11-17', -0.0048077659947548534, -0.0013821700069109877], ['2017-11-20', 0.00280566347143707, 0.0], ['2017-11-21', 0.005335133357552202, 0.10000000000000009], ['2017-11-22', 0.005854453442381891, 0.022334067316766237], ['2017-11-23', -0.022896638218913967, -0.03692307692307695], ['2017-11-24', 0.0005675854500268862, 0.015974440894568787], ['2017-11-27', -0.009419376533754464, -0.008805031446540879], ['2017-11-28', 0.0034396175725111, -0.024428934010152226], ['2017-11-29', 0.0012613775202428013, 0.09983739837398375], ['2017-11-30', -0.0061936652863420205, -0.0768775872264933], ['2017-12-01', 0.00012932638978235822, -0.015695067264573925], ['2017-12-04', -0.0024110977956650625, 0.003904978848031204], ['2017-12-05', -0.0017957357801653417, 0.005834683954619058], ['2017-12-06', -0.0029392418158794564, -0.008378988076055527], ['2017-12-07', -0.006651740783629512, -0.02664933376665579], ['2017-12-08', 0.005482244151090221, -0.004340567612687751], ['2017-12-11', 0.009788229298037354, 0.0036887994634473564], ['2017-12-12', -0.012456220217737957, -0.012028065486134332], ['2017-12-13', 0.006773838050415204, 0.012512681772066214], ['2017-12-14', -0.003208804211808247, 0.0056780227120907245], ['2017-12-15', -0.007988425600053084, -0.03321155762205252], ['2017-12-18', 0.0005466090201786677, -0.022329096530401826], ['2017-12-19', 0.008756633878454378, 0.024595924104005684], ['2017-12-20', -0.0027089008475552623, -0.019204389574759895], ['2017-12-21', 0.0037869455318604306, 0.03916083916083912], ['2017-12-22', -0.0009090743804658352, 0.004374158815612539], ['2017-12-25', -0.005034788569210136, 0.01742043551088779], ['2017-12-26', 0.007822073733561696, 0.004280540006585509], ['2017-12-27', -0.00917692037796558, 0.009508196721311535], ['2017-12-28', 0.0062885785980744124, -0.002923026956804131], ['2017-12-29', 0.0032732876670771294, 0.011726384364820763]];
/////////////////

var data = chartData.map(function (item) {
    return [item[1], item[2]];
});
alert(data)
// See https://github.com/ecomfe/echarts-stat
var myRegression = ecStat.regression('linear', data);

myRegression.points.sort(function(a, b) {
    return a[0] - b[0];
});

option = {
    title: {
        text: '回归分析',
        left: 'center'
    },
    tooltip: {
        trigger: 'axis',
        axisPointer: {
            type: 'cross'
        }
    },
    xAxis: {
        type: 'value',
        splitLine: {
            lineStyle: {
                type: 'dashed'
            }
        },
    },
    yAxis: {
        type: 'value',
        min: 1.5,
        splitLine: {
            lineStyle: {
                type: 'dashed'
            }
        },
    },
    series: [{
        name: 'scatter',
        type: 'scatter',
        label: {
            emphasis: {
                show: true,
                position: 'left',
                textStyle: {
                    color: 'blue',
                    fontSize: 16
                }
            }
        },
        data: data
    }, {
        name: 'line',
        type: 'line',
        showSymbol: false,
        data: myRegression.points,
        markPoint: {
            itemStyle: {
                normal: {
                    color: 'transparent'
                }
            },
            label: {
                normal: {
                    show: true,
                    position: 'left',
                    formatter: myRegression.expression,
                    textStyle: {
                        color: '#333',
                        fontSize: 14
                    }
                }
            },
            data: [{
                coord: myRegression.points[myRegression.points.length - 1]
            }]
        }
    }]
};